package tp1.logic.gameobjects;

import tp1.logic.Game;
import tp1.logic.Position;
import tp1.view.Messages;
import tp1.logic.Action;

public class Goomba extends GameObject{	
	private boolean right = false;
	
	public Goomba(Game game, Position new_pos) {
		super(game, new_pos, false);
	}
	
	public boolean IsInPos(Position pos) {
		return this.pos.equals(pos);
	}
	
	public String getIcon() {
		return Messages.GOOMBA;
	}
	
	public void update() {
		if (false)
			this.move(Action.LEFT);
		
		else if (right && !this.pos.add_x(pos, 1).outOfBounds())
			this.move(Action.RIGHT);
		
		else {
			if(!this.pos.add_x(pos, -1).outOfBounds()) {
				this.move(Action.LEFT);;
				right = false;
			}
			else if (!this.pos.add_x(pos, 1).outOfBounds()){
				this.move(Action.RIGHT);
				right = true;
			}
		}
	}
	
	public boolean receiveInteraction(Mario other) {
		boolean interacted = false;
		if (other.IsInPos(this.pos) && this.isAlive()) {
			this.dead();
			interacted = true;
		}
		
		return interacted;
	}
	
	public boolean receiveInteraction(Ground ground) {
		boolean interacted = true;
		
		return interacted;
	}
	
	public boolean receiveInteraction(ExitDoor door) {
		boolean interacted = true;
		
		return interacted;
	}
	
	public boolean receiveInteraction(Goomba goomba) {
		boolean interacted = true;
		
		return interacted;
	}
	
	 public boolean interactWith(GameItem other) {
	  	boolean canInteract = other.isInPosition(this.pos);
	  	if (canInteract) {
	  		other.receiveInteraction(this);
		}
		return canInteract;
	 }
}
